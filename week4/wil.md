# ERD , DB , 엔티티

## 데이터베이스 모델링 : ERD
### ERD
ERD = 데이터 청사진  
+ Entity(개채) : 데이터를 가진 대상
+ Realtion(관계) : 개체 사이의 연관성

개체-관계 중심의 모델링 표기법 : ER Model  
ER Model을 시각정 표현 -> ERD 개발자 간, 클라이언트간 소통 도구

### DB 설계
1. 엔티티 : 관리해야 할 데이터의 주체
2. 속성(Attribute): 각 엔티티가 가지는 구체적 정보
    속성 = 필드 = 칼럼
3. 기본 키 
    + 고유하게 식별하는 데 사용되는 하나 이상의 컬럼
4. 외래 키
    + 다른 테이블의 PK를 참조(저장)하는 속성
    + 테이블 간 연결고리
5. 관계 : 개차 사이의 연관성, 업무 규칙
    + 테이블 또는 외래 키로 구현



## 설계도를 코드로 : JPA 엔티티 구현
+ JPA (Java Persistence API)  
자바 진영의 ORM 기술 표준  
대표적인 JPA 구현체는 Hibernate

+ ORM (Object-Relational Mapping)  
객체와 관계형 데이터베이스의 데이터를 자동으로 매핑 해주는 것  
객체 - 데이터베이스 간 페러다임 차이 해결  
반복적인 CRUD SQL 자동으로 처리  

### 엔티티
+ 자바와 DB가 소통하는 단위
+ 엔티티 클래스를 정의 -> JPA: 엔티티 클래스 정의를 참고하여 테이블 생성 SQL문을 작성하고 실행
+ JPA는 SQL 작성 시간을 단축시켜 준다!


## API 테스트
### 엔티티 생성자
+ 보통 id 필드를 제외하고 생성
+ JPA가 엔티티를 사용하려면 인자 없는 생성자가 필요함
+ access 속성을 통해 접근 제한자를 protected로 설정.  
jpa만 사용 가능

### 외래키
+ 엔티티 객체를 필드로 넣은후  
@JoinColumn, @ManyToOne 사용
+ @ManyToOne 에서 fetch 속성은 LAZY로 지정
    + LAZY : 지연로딩 , Order 객체 정보를 가져올 때 연결된  
    Member 객체의 정보는 필요할 때 가져온다

    + EAGER : 즉시로딩 , Order 객체 정보 가져올때  
    Member 객체의 모든 정보를 함께 한번에 가져옴